name: Python Unit Tests

on:
  push:
    branches: [ "**" ]  # Trigger on all branch pushes
  pull_request:
    branches: [ "main" ]  # Trigger on PRs targeting main

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.12"]  # Using latest stable Python version

    steps:
    - uses: actions/checkout@v4  # Latest checkout action
      with:
        fetch-depth: 0

    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5  # Latest Python setup action
      with:
        python-version: ${{ matrix.python-version }}
        cache: 'pip'  # Caches pip dependencies

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install flask pytest

    - name: Run unit tests with pytest
      run: |
        python -m pytest tests/ -v
